import{j as e}from"./vendor-radix-ByHbWxx8.js";import{a as u}from"./vendor-react-BF0FEgLq.js";import{u as b,k as S,B as C,f as E,a as G,t as x}from"./index-0aCTP9xq.js";import{C as k,a as P,c as T,d as O}from"./card-Dst-uUJd.js";import{S as q,B as F}from"./badge-WuK-6-Ms.js";import{G as M,T as V,D as H}from"./DataTablePagination-Dg7qy-0E.js";import{I as R}from"./info-CzjyAUpq.js";import{I as $}from"./input-BzJ4CQH1.js";import{L as j}from"./label-X5ZxR2EB.js";import{S as A,a as J,b as K,c as Q,d as g}from"./select-DBeyWshw.js";import{G as U}from"./GenericDialog-3Ds61fFP.js";import"./vendor-charts-3qJ5OAaG.js";import"./chevron-left-BUxVMVdO.js";function W({positions:o,paginatedPositions:c,getCategoryBadge:d,handleOpenDialog:n,handleDelete:t}){const{t:r}=b(),m=[{header:r("positions_col_name"),render:s=>e.jsx("span",{className:"font-medium",children:s.name})},{header:r("positions_col_category"),render:s=>d(s.category)},{header:r("positions_col_description"),render:s=>e.jsx("span",{className:"text-sm text-muted-foreground",children:s.description||"â€”"})}],i=s=>e.jsxs(k,{className:"overflow-hidden border-border bg-card hover:border-primary/50 transition-colors",children:[e.jsxs(P,{className:"p-4 pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(S,{className:"w-5 h-5 text-primary"})}),e.jsx("div",{children:e.jsx("div",{className:"font-bold text-lg text-foreground leading-tight",children:s.name})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(C,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>n(s),children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx(C,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive",onClick:()=>t(s.id),children:e.jsx(V,{className:"w-4 h-4"})})]})]}),e.jsxs(T,{className:"p-4 pt-2 space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground uppercase tracking-wider font-semibold mr-1",children:[r("positions_col_category"),":"]}),d(s.category)]}),s.description&&e.jsxs("div",{className:"flex items-start gap-2 bg-muted/30 p-3 rounded-lg border border-border/50",children:[e.jsx(R,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0"}),e.jsx("span",{className:"text-sm text-muted-foreground italic",children:s.description})]})]})]});return e.jsx(M,{data:c,columns:m,onEdit:n,onDelete:s=>t(s.id),renderMobileCard:i,emptyMessage:r("positions_empty"),idField:"id"})}function X({className:o,...c}){return e.jsx("textarea",{"data-slot":"textarea",className:E("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),...c})}function Y({isDialogOpen:o,setIsDialogOpen:c,editingPosition:d,formData:n,setFormData:t,handleOpenDialog:r,handleSubmit:m}){const{t:i}=b();return e.jsx(U,{isOpen:o,onOpenChange:c,title:i(d?"positions_dialog_edit":"positions_dialog_add"),onSubmit:m,onCancel:()=>c(!1),triggerLabel:i("positions_add"),saveLabel:i(d?"common_update":"common_create"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"name",children:i("positions_name")}),e.jsx($,{id:"name",value:n.name||"",onChange:s=>t({...n,name:s.target.value}),placeholder:"",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"category",children:i("positions_category")}),e.jsxs(A,{value:n.category,onValueChange:s=>t({...n,category:s}),children:[e.jsx(J,{className:"mt-1",children:e.jsx(K,{})}),e.jsxs(Q,{children:[e.jsx(g,{value:"positions_cat_commander",children:i("positions_cat_commander")}),e.jsx(g,{value:"positions_cat_sergeant",children:i("positions_cat_sergeant")}),e.jsx(g,{value:"positions_cat_soldier",children:i("positions_cat_soldier")}),e.jsx(g,{value:"positions_cat_civilian",children:i("positions_cat_civilian")})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"description",children:i("positions_description")}),e.jsx(X,{id:"description",value:n.description||"",onChange:s=>t({...n,description:s.target.value}),placeholder:"",rows:3,className:"mt-1"})]})]})})}function pe(){const{positions:o,addPosition:c,updatePosition:d,deletePosition:n}=G(),{t}=b(),[r,m]=u.useState(1),[i,s]=u.useState(10),v=Math.ceil(o.length/i),z=o.slice((r-1)*i,r*i),[D,h]=u.useState(!1),[_,N]=u.useState(null),[l,f]=u.useState({name:"",category:"positions_cat_soldier",description:""}),y=a=>{a?(N(a),f(a)):(N(null),f({name:"",category:"positions_cat_soldier",description:""})),h(!0)},B=async a=>{if(a.preventDefault(),!l.name||!l.category){x.error(t("positions_err_required"));return}if(_)await d(_.id,l)&&x.success(t("positions_updated"));else{const p={id:`pos-${Date.now()}`,name:l.name,category:l.category,description:l.description};await c(p)&&x.success(t("positions_added"))}h(!1)},I=async a=>{confirm(t("positions_confirm_delete"))&&await n(a)&&x.success(t("positions_deleted"))},L=a=>{const p={positions_cat_commander:"bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-100",positions_cat_sergeant:"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-100",positions_cat_soldier:"bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-100",positions_cat_civilian:"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100"},w=a==="positions_cat_commander"?t("positions_cat_commander"):a==="positions_cat_sergeant"?t("positions_cat_sergeant"):a==="positions_cat_soldier"?t("positions_cat_soldier"):a==="positions_cat_civilian"?t("positions_cat_civilian"):a;return e.jsx(F,{variant:"secondary",className:p[a]||"",children:w})};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-semibold text-foreground",children:t("positions_title")}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:[t("positions_subtitle")," ",e.jsx("span",{className:"font-medium",children:o.length})]})]}),e.jsx(Y,{isDialogOpen:D,setIsDialogOpen:h,editingPosition:_,formData:l,setFormData:f,handleOpenDialog:y,handleSubmit:B})]}),e.jsxs(k,{children:[e.jsx(P,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),t("positions_list")]})})}),e.jsxs(T,{children:[e.jsx(W,{positions:o,paginatedPositions:z,getCategoryBadge:L,handleOpenDialog:y,handleDelete:I}),v>0&&e.jsx(H,{currentPage:r,setCurrentPage:m,pageSize:i,setPageSize:s,totalPages:v})]})]})]})}export{pe as default};
