import{j as s}from"./vendor-radix-ByHbWxx8.js";import{a as S}from"./vendor-react-BF0FEgLq.js";import{p as O,g as D,a as L,u as k,B as n,S as _,t as r}from"./index-0aCTP9xq.js";import{I as f}from"./input-BzJ4CQH1.js";import{L as N}from"./label-X5ZxR2EB.js";import{C as i,a as o,d as l,c}from"./card-Dst-uUJd.js";import{S as z}from"./save-_qgdHCOf.js";import{D as E}from"./download-CHPCMnZd.js";import{R as U}from"./refresh-cw-BDNQxtzz.js";import{I as B}from"./info-CzjyAUpq.js";import"./vendor-charts-3qJ5OAaG.js";function M(){const{settings:m,updateSettings:v}=O(),{personnel:d}=D(),{units:g,positions:x,roles:h}=L(),{t:e}=k(),[p,b]=S.useState(m.organizationName),[j,w]=S.useState(m.organizationSubtitle),y=()=>{v({organizationName:p,organizationSubtitle:j}),r.success(e("settings_saved"))},C=()=>{const t={personnel:d,units:g,positions:x,roles:h,exportedAt:new Date().toISOString()},R=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),u=URL.createObjectURL(R),a=document.createElement("a");a.href=u,a.download=`pms-export-${new Date().toISOString().slice(0,10)}.json`,a.click(),URL.revokeObjectURL(u),r.success(e("settings_exported"))},I=()=>{window.confirm(e("settings_reset_confirm"))&&(localStorage.removeItem("personnel-data"),localStorage.removeItem("units-data"),localStorage.removeItem("positions-data"),localStorage.removeItem("roles-data"),localStorage.removeItem("directions-data"),r.success(e("settings_reset_success")),setTimeout(()=>window.location.reload(),1500))};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-semibold text-gray-900",children:e("settings_title")}),s.jsx("p",{className:"text-gray-600 mt-1",children:e("settings_subtitle")})]}),s.jsxs(i,{children:[s.jsx(o,{children:s.jsx(l,{children:e("settings_org_title")})}),s.jsxs(c,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(N,{htmlFor:"orgName",children:e("settings_org_name")}),s.jsx(f,{id:"orgName",value:p,onChange:t=>b(t.target.value),placeholder:""})]}),s.jsxs("div",{children:[s.jsx(N,{htmlFor:"orgSubtitle",children:e("settings_org_subtitle")}),s.jsx(f,{id:"orgSubtitle",value:j,onChange:t=>w(t.target.value),placeholder:""})]}),s.jsxs(n,{onClick:y,children:[s.jsx(z,{className:"w-4 h-4 mr-2"}),e("settings_save")]})]})]}),s.jsx(_,{}),s.jsxs(i,{children:[s.jsx(o,{children:s.jsx(l,{children:e("settings_data_mgmt")})}),s.jsxs(c,{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:[e("settings_current")," ",d.length," ",e("settings_persons")," · ",g.length," ",e("settings_units")," · ",x.length," ",e("settings_positions")," · ",h.length," ",e("settings_roles")]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(n,{variant:"outline",onClick:C,children:[s.jsx(E,{className:"w-4 h-4 mr-2"}),e("settings_export")]}),s.jsxs(n,{variant:"destructive",onClick:I,children:[s.jsx(U,{className:"w-4 h-4 mr-2"}),e("settings_reset")]})]})]})]}),s.jsx(_,{}),s.jsxs(i,{children:[s.jsx(o,{children:s.jsxs(l,{className:"flex items-center gap-2",children:[s.jsx(B,{className:"w-5 h-5"}),e("settings_about")]})}),s.jsx(c,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-y-3 text-sm max-w-sm",children:[s.jsx("span",{className:"text-gray-500",children:e("settings_version")}),s.jsx("span",{className:"font-medium",children:"1.0.0"}),s.jsx("span",{className:"text-gray-500",children:e("settings_stack")}),s.jsx("span",{className:"font-medium",children:"React 18 + TypeScript + Vite"}),s.jsx("span",{className:"text-gray-500",children:e("settings_storage")}),s.jsx("span",{className:"font-medium",children:"localStorage"})]})})]})]})}export{M as default};
