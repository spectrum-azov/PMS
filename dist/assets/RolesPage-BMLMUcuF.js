import{j as e}from"./vendor-radix-ByHbWxx8.js";import{a as p}from"./vendor-react-BF0FEgLq.js";import{c as te,u as N,B as v,a as ie,m as ce,t as h}from"./index-0aCTP9xq.js";import{C as I,a as R,c as O,d as M}from"./card-Dst-uUJd.js";import{B as b,S as $}from"./badge-WuK-6-Ms.js";import{G as oe,T as V,D as de}from"./DataTablePagination-Dg7qy-0E.js";import{A as me}from"./award-tgggjc9z.js";import{I as H}from"./input-BzJ4CQH1.js";import{L as f}from"./label-X5ZxR2EB.js";import{G as U}from"./GenericDialog-3Ds61fFP.js";import{S as E,a as A,b as B,c as G,d as j}from"./select-DBeyWshw.js";import"./vendor-charts-3qJ5OAaG.js";import"./chevron-left-BUxVMVdO.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],F=te("layers",xe);function ue({roles:c,paginatedRoles:u,getDirectionName:g,getLevelBadge:o,handleOpenRoleDialog:a,handleDeleteRole:d}){const{t:m}=N(),i=[{header:m("roles_col_name"),render:l=>e.jsx("span",{className:"font-medium",children:l.name})},{header:m("roles_col_direction"),render:l=>e.jsx(b,{variant:"outline",children:g(l.directionId)})},{header:m("roles_col_level"),render:l=>o(l.level)}],s=l=>e.jsxs(I,{className:"overflow-hidden border-border bg-card hover:border-primary/50 transition-colors",children:[e.jsxs(R,{className:"p-4 pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(me,{className:"w-5 h-5 text-primary"})}),e.jsx("div",{children:e.jsx("div",{className:"font-bold text-lg text-foreground leading-tight",children:l.name})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(v,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>a(l),children:e.jsx($,{className:"w-4 h-4"})}),e.jsx(v,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive",onClick:()=>d(l.id),children:e.jsx(V,{className:"w-4 h-4"})})]})]}),e.jsx(O,{className:"p-4 pt-2 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-2 bg-muted/30 p-3 rounded-lg border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(F,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-muted-foreground mr-1",children:[m("roles_col_direction"),":"]}),e.jsx(b,{variant:"outline",className:"text-xs bg-background",children:g(l.directionId)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm mt-1",children:[e.jsxs("span",{className:"text-muted-foreground mr-1",children:[m("roles_col_level"),":"]}),o(l.level)]})]})})]});return e.jsx(oe,{data:u,columns:i,onEdit:a,onDelete:l=>d(l.id),renderMobileCard:s,emptyMessage:m("roles_empty"),idField:"id"})}function he({onSave:c,editingDirection:u,isOpen:g,setIsOpen:o,directionFormData:a,setDirectionFormData:d,handleOpenDialog:m}){const{t:i}=N();return e.jsx(U,{isOpen:g,onOpenChange:o,title:i(u?"roles_dialog_edit_direction":"roles_dialog_add_direction"),onSubmit:s=>{s.preventDefault(),c(a)},onCancel:()=>o(!1),triggerLabel:i("roles_add_direction"),saveLabel:i(u?"common_update":"common_create"),children:e.jsxs("div",{children:[e.jsx(f,{htmlFor:"directionName",children:i("roles_direction_name")}),e.jsx(H,{id:"directionName",value:a.name,onChange:s=>d({name:s.target.value}),placeholder:"",required:!0,className:"mt-1"})]})})}function ge({onSave:c,editingRole:u,isOpen:g,setIsOpen:o,roleFormData:a,setRoleFormData:d,handleOpenDialog:m,directions:i}){var l;const{t:s}=N();return e.jsx(U,{isOpen:g,onOpenChange:o,title:s(u?"roles_dialog_edit_role":"roles_dialog_add_role"),onSubmit:t=>{t.preventDefault(),c(a)},onCancel:()=>o(!1),triggerLabel:s("roles_add_role"),saveLabel:s(u?"common_update":"common_create"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"roleName",children:s("roles_role_name")}),e.jsx(H,{id:"roleName",value:a.name||"",onChange:t=>d({...a,name:t.target.value}),placeholder:"",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"directionId",children:s("roles_functional_direction")}),e.jsxs(E,{value:a.directionId,onValueChange:t=>d({...a,directionId:t}),children:[e.jsx(A,{className:"mt-1",children:e.jsx(B,{placeholder:s("roles_select_direction")})}),e.jsx(G,{children:i.map(t=>e.jsx(j,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"level",children:s("roles_expertise_level")}),e.jsxs(E,{value:(l=a.level)==null?void 0:l.toString(),onValueChange:t=>d({...a,level:parseInt(t)}),children:[e.jsx(A,{className:"mt-1",children:e.jsx(B,{})}),e.jsxs(G,{children:[e.jsxs(j,{value:"1",children:["1 - ",s("roles_level_beginner")]}),e.jsxs(j,{value:"2",children:["2 - ",s("roles_level_experienced")]}),e.jsxs(j,{value:"3",children:["3 - ",s("roles_level_expert")]})]})]})]})]})})}function Ie(){const{roles:c,addRole:u,updateRole:g,deleteRole:o,directions:a,addDirection:d,updateDirection:m,deleteDirection:i}=ie(),{t:s}=N(),[l,t]=p.useState(1),[_,J]=p.useState(10),L=Math.ceil(c.length/_),K=c.slice((l-1)*_,l*_),[Q,w]=p.useState(!1),[W,y]=p.useState(!1),[S,z]=p.useState(null),[C,q]=p.useState(null),[X,D]=p.useState({name:"",directionId:"",level:1}),[Y,k]=p.useState({name:""}),P=r=>{r?(z(r),D(r)):(z(null),D({name:"",directionId:"",level:1})),w(!0)},T=r=>{r?(q(r),k({name:r.name})):(q(null),k({name:""})),y(!0)},Z=async r=>{if(!r.name||!r.directionId){h.error(s("roles_err_name_required"));return}if(S)await g(S.id,r)&&h.success(s("roles_updated"));else{const n={id:`role-${Date.now()}`,name:r.name,directionId:r.directionId,level:r.level};await u(n)&&h.success(s("roles_added"))}w(!1)},ee=async r=>{if(!r.name){h.error(s("roles_err_dir_name_required"));return}C?await m(C.id,r)&&h.success(s("roles_direction_updated")):await d({id:`dir-${Date.now()}`,name:r.name})&&h.success(s("roles_direction_added")),y(!1)},se=async r=>{confirm(s("roles_confirm_delete_role"))&&await o(r)&&h.success(s("roles_deleted"))},re=async r=>{if(c.some(x=>x.directionId===r)){h.error(s("roles_err_dir_has_roles"));return}confirm(s("roles_confirm_delete_dir"))&&await i(r)&&h.success(s("roles_direction_deleted"))},le=r=>{const n=a.find(x=>x.id===r);return(n==null?void 0:n.name)||s("common_unknown")},ae=r=>{const n=["bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100","bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-100","bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-100","bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-100"],x=[s("roles_level_none"),s("roles_level_beginner"),s("roles_level_experienced"),s("roles_level_expert")],ne=r||0;return e.jsx(b,{variant:"secondary",className:n[ne],children:r?`${r} - ${x[r]}`:x[0]})};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-semibold text-foreground",children:s("roles_title")}),e.jsx("p",{className:"text-muted-foreground mt-1",children:s("roles_subtitle")})]})}),e.jsxs(I,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),s("roles_directions_title")," (",a.length,")"]}),e.jsx(he,{isOpen:W,setIsOpen:y,editingDirection:C,directionFormData:Y,setDirectionFormData:k,handleOpenDialog:()=>T(),onSave:ee})]})}),e.jsx(O,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(r=>{const n=c.filter(x=>x.directionId===r.id).length;return e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-secondary/40 border border-border rounded-lg",children:[e.jsx("span",{className:"font-medium text-foreground",children:r.name}),e.jsxs(b,{variant:"outline",className:"bg-background text-foreground shrink-0 border-border",children:[n," ",s("roles_roles")]}),e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx(v,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-muted",onClick:()=>T(r),children:e.jsx($,{className:"w-3 h-3 text-muted-foreground"})}),e.jsx(v,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-destructive/10",onClick:()=>re(r.id),children:e.jsx(V,{className:"w-3 h-3 text-destructive"})})]})]},r.id)})})})]}),e.jsxs(I,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),s("roles_roles_title")," (",c.length,")"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ge,{isOpen:Q,setIsOpen:w,editingRole:S,roleFormData:X,setRoleFormData:D,handleOpenDialog:()=>P(),onSave:Z,directions:a})})]})}),e.jsxs(O,{children:[e.jsx(ue,{roles:c,paginatedRoles:K,getDirectionName:le,getLevelBadge:ae,handleOpenRoleDialog:P,handleDeleteRole:se}),L>0&&e.jsx(de,{currentPage:l,setCurrentPage:t,pageSize:_,setPageSize:J,totalPages:L})]})]})]})}export{Ie as default};
